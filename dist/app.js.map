{"version":3,"sources":["../src/app.ts"],"names":["app","server","http","Server","io","use","BodyParser","urlencoded","extended","__dirname","on","socket","id","player","pg","getPlayerBySocket","lobby","isEmpty","deleteLobby","listen"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAQA;;AACA;;;;AAPA,MAAMA,GAAG,GAAG,uBAAZ;AACA,MAAMC,MAAM,GAAG,IAAIC,cAAKC,MAAT,CAAgBH,GAAhB,CAAf;AACA,MAAMI,EAAE,GAAG,qBAASH,MAAT,CAAX;AAEAD,GAAG,CAACK,GAAJ,CAAQC,oBAAWC,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AAKA,0BAAoBR,GAApB,EAAyBS,SAAzB;AAEAL,EAAE,CAACM,EAAH,CAAM,YAAN,EAAqBC,MAAD,IAAY;AAC/B,qBAAK,EAAL,EAASA,MAAM,CAACC,EAAhB,EAAoB,WAApB;AAEA,oBAAiBD,MAAjB;AAEAA,EAAAA,MAAM,CAACD,EAAP,CAAU,YAAV,EAAwB,MAAM;AAC7B,uBAAK,EAAL,EAASC,MAAM,CAACC,EAAhB,EAAoB,cAApB;;AAEA,UAAMC,MAAM,GAAGC,YAAGC,iBAAH,CAAqBJ,MAArB,CAAf;;AAEA,QAAI,CAAEE,MAAF,IAAY,CAAEA,MAAM,CAACG,KAArB,IAA8B,CAAEH,MAAM,CAACG,KAAP,CAAaC,OAAb,EAApC,EAA4D;;AAE5DH,gBAAGI,WAAH,CAAeL,MAAM,CAACG,KAAtB;AACA,GARD;AASA,CAdD;AAgBAf,MAAM,CAACkB,MAAP,CAAc,IAAd,EAAoB,MAAM;AACzB,qBAAK,EAAL,EAAS,qBAAT;AACA,CAFD","sourcesContent":["import express from 'express'\nimport http from 'http'\nimport socketIo from 'socket.io'\nimport BodyParser from 'body-parser'\nimport pg from 'pg'\nimport { info } from 'helpers'\n\nconst app = express()\nconst server = new http.Server(app)\nconst io = socketIo(server)\n\napp.use(BodyParser.urlencoded({ extended: true }))\n\nimport addStaticFileRoutes from './routing/static-files'\nimport addPrimaryEvents from './PrimaryEvents/Add'\n\naddStaticFileRoutes(app, __dirname)\n\nio.on('connection', (socket) => {\n\tinfo('', socket.id, 'connected')\n\n\taddPrimaryEvents(socket)\n\n\tsocket.on('disconnect', () => {\n\t\tinfo('', socket.id, 'disconnected')\n\n\t\tconst player = pg.getPlayerBySocket(socket)\n\n\t\tif (! player || ! player.lobby || ! player.lobby.isEmpty()) return\n\n\t\tpg.deleteLobby(player.lobby)\n\t})\n})\n\nserver.listen(3000, () => {\n\tinfo('', 'listening on *:3000')\n})\n"],"file":"app.js"}